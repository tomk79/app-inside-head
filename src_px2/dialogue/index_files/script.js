(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var r=new WeakMap,a=new WeakSet;function s(e){var t,n=(this,(t=r).get(o(t,this)));return n||(n="${mainTheme}"),n.split("${mainTheme}").join(e.mainTheme)}const c=function(){return e=function e(t){var n,s,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,n=a),n.add(this),function(e,t,n){i(e,t),t.set(e,"")}(this,r),s=r,c=t.template||"",s.set(o(s,this),c)},(n=[{key:"ask",value:function(e){var t=o(a,this,s).call(this,e);return new Promise((function(e,n){$.ajax({url:"./index_files/apis/query.php",type:"post",dataType:"json",data:{content:t,CSRF_TOKEN:$("meta[name=csrf-token]").attr("content")},async:!0}).done((function(t){e(t)})).fail((function(e){n(e)}))}))}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function m(e,t,n){h(e,t),t.set(e,n)}function h(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t){return e.get(v(e,t))}function y(e,t,n){return e.set(v(e,t),n),n}function v(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var b=new WeakMap,w=new WeakMap,d=new WeakMap,g=new WeakMap,k=new WeakSet;function T(){var e,t=this;y(d,this,(e=p(d,this),++e)),p(d,this)>10?console.log("exit"):p(g,this).presenter.ask({mainTheme:p(b,this)}).then((function(e){console.log("#idation result:",e),y(w,t,e.choices[0].message.content),v(k,t,S).call(t)})).catch((function(e){console.error(e)}))}function S(){var e=this,t=[];return p(g,this).reviewers.forEach((function(n){t.push(n.ask({mainTheme:p(b,e),currentIdea:p(w,e)}))})),Promise.allSettled(t).then((function(t){console.log("#review result:",t),v(k,e,T).call(e)})).catch((function(e){console.error(e)}))}var j,P=new(function(){return e=function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,t=k),t.add(this),m(this,b,void 0),m(this,w,void 0),m(this,d,0),m(this,g,void 0)},(t=[{key:"init",value:function(e){var t=this;y(b,this,e.mainTheme),y(w,this,""),y(d,this,0),y(g,this,{presenter:new c({template:e.members.presenter.template||""}),reviewers:[]}),e.members.reviewers.forEach((function(e){p(g,t).reviewers.push(new c({template:e.template||""}))}))}},{key:"startDiscussion",value:function(){v(k,this,T).call(this)}},{key:"stopDiscussion",value:function(){}}])&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());$("#cont-btn-sendtest").on("click",(function(){var e=$('textarea[name="main-theme"]').val();new Promise((function(e,t){j?e(j):window.getCsrfToken((function(t){e(j=t)}))})).then((function(e){return new Promise((function(e,t){$.ajax({url:"./index_files/apis/get_committee_settings.php",type:"get",dataType:"json",async:!0}).done((function(t){e(t.members)})).fail((function(e){console.error(e)}))}))})).then((function(t){P.init({mainTheme:e,members:t}),P.startDiscussion()}))}))})();
//# sourceMappingURL=script.js.map